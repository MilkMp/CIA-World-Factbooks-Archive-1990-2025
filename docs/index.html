<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CIA World Factbooks Archive 1990-2025</title>
<meta name="description" content="Complete structured archive of the CIA World Factbook spanning 36 years (1990-2025), 281 entities, and 1,061,522 parsed data fields in a normalized database.">
<meta name="keywords" content="CIA World Factbook, CIA Factbook, world factbook archive, geopolitical data, OSINT, open source intelligence, country data, SQL Server, ETL, data archive, public domain">
<meta property="og:title" content="CIA World Factbooks Archive 1990-2025">
<meta property="og:description" content="36 years of CIA World Factbook data preserved in a structured, queryable database. 281 entities, 1,061,522 fields, fully normalized.">
<meta property="og:image" content="https://milkmp.github.io/CIA-World-Factbooks-Archive-1990-2025/screenshots/homepage.png">
<meta property="og:url" content="https://milkmp.github.io/CIA-World-Factbooks-Archive-1990-2025/">
<meta property="og:type" content="website">
<meta property="og:site_name" content="CIA World Factbooks Archive">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="CIA World Factbooks Archive 1990-2025">
<meta name="twitter:description" content="36 years of CIA World Factbook data preserved in a structured, queryable database. 281 entities, 1,061,522 fields.">
<meta name="twitter:image" content="https://milkmp.github.io/CIA-World-Factbooks-Archive-1990-2025/screenshots/homepage.png">
<link rel="canonical" href="https://milkmp.github.io/CIA-World-Factbooks-Archive-1990-2025/">
<style>
/* Core reset */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; }

body {
  font-family: 'Georgia', 'Times New Roman', serif;
  background: #111418;
  color: #ABB3BF;
  line-height: 1.65;
  min-height: 100vh;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

a { color: #C5CBD3; text-decoration: none; transition: color 100ms cubic-bezier(0.4, 1, 0.75, 0.9); }
a:hover { text-decoration: underline; color: #FFFFFF; }

/* Banner */
.banner {
  background: #1C2127; border-bottom: 1px solid #2F343C;
  padding: 6px 0; text-align: center;
  font-family: 'Consolas', 'Courier New', monospace;
  font-size: 0.7rem; letter-spacing: 4px; text-transform: uppercase; color: #5F6B7C;
  position: sticky; top: 0; z-index: 100;
}

/* Layout */
.layout { display: flex; min-height: calc(100vh - 30px); }

.sidebar {
  width: 220px; background: #1C2127; border-right: 1px solid #2F343C;
  padding: 20px 0; flex-shrink: 0; position: sticky; top: 30px;
  height: calc(100vh - 30px); overflow-y: auto;
}
.sidebar-title {
  font-family: -apple-system, 'Segoe UI', sans-serif; font-size: 0.65rem;
  text-transform: uppercase; letter-spacing: 2px; color: #5F6B7C; padding: 0 20px; margin-bottom: 12px;
}
.sidebar a {
  display: block; padding: 8px 20px;
  font-family: -apple-system, 'Segoe UI', sans-serif; font-size: 0.82rem;
  color: #8F99A8; border-left: 3px solid transparent; cursor: pointer;
  transition: color 100ms, background-color 100ms, border-color 100ms;
}
.sidebar a:hover, .sidebar a.active {
  background: rgba(47, 52, 60, 0.5); color: #C5CBD3;
  border-left-color: #C5CBD3; text-decoration: none;
}
.sidebar .nav-section {
  font-family: -apple-system, 'Segoe UI', sans-serif; font-size: 0.65rem;
  text-transform: uppercase; letter-spacing: 1.5px; color: #5F6B7C; padding: 16px 20px 6px;
}

.main-content { flex: 1; padding: 32px 40px; min-width: 0; max-width: 1400px; margin: 0 auto; }

/* Page Header */
.page-header { margin-bottom: 28px; }
.page-header h1 { font-size: 1.4rem; font-weight: 400; color: #C5CBD3; text-transform: uppercase; letter-spacing: 3px; line-height: 1.3; }
.page-header .subtitle { font-size: 0.9rem; color: #8F99A8; font-style: italic; margin-top: 4px; }
.page-header .doc-id { font-family: 'Consolas', 'Courier New', monospace; font-size: 0.72rem; color: #5F6B7C; letter-spacing: 1px; margin-bottom: 8px; }

/* Sections */
.sec { margin-top: 32px; margin-bottom: 14px; }
.sec-num { font-family: 'Consolas', 'Courier New', monospace; font-size: 0.75rem; color: #5F6B7C; display: block; margin-bottom: 2px; }
.sec-title { font-family: -apple-system, 'Segoe UI', sans-serif; font-size: 0.8rem; font-weight: 600; text-transform: uppercase; letter-spacing: 2px; color: #8F99A8; }
.sec-rule { border: none; border-top: 1px solid #2F343C; margin-top: 6px; }
.doc-rule { border: none; border-top: 2px solid #2F343C; margin: 24px 0; }
.doc-rule.double { border-top: 3px double #383E47; }

/* Body text */
p { font-size: 0.9rem; color: #8F99A8; max-width: 860px; margin-bottom: 12px; }

/* Data tables */
.data-table { width: 100%; border-collapse: collapse; margin: 14px 0 8px; font-size: 0.85rem; }
.data-table th {
  font-family: -apple-system, 'Segoe UI', sans-serif; text-align: left;
  padding: 8px 12px; border-bottom: 1px solid #383E47; color: #8F99A8;
  font-weight: 600; font-size: 0.7rem; text-transform: uppercase; letter-spacing: 1px;
}
.data-table td { padding: 6px 12px; border-bottom: 1px solid #252A31; color: #ABB3BF; }
.data-table td.r { text-align: right; font-family: 'Consolas', 'Courier New', monospace; color: #C5CBD3; font-size: 0.82rem; }
.data-table td.mono { font-family: 'Consolas', 'Courier New', monospace; font-size: 0.82rem; color: #C5CBD3; }
.data-table tr { transition: background-color 100ms; }
.data-table tr:hover td { background: rgba(47, 52, 60, 0.3); }
tr.clickable { cursor: pointer; }
tr.clickable:hover td { background: rgba(47, 52, 60, 0.4); }

/* Stat cards */
.stat-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 16px; margin: 20px 0; }
.stat-card {
  background: #1C2127; border: 1px solid #2F343C; border-radius: 4px;
  padding: 16px 20px; text-align: center;
  transition: border-color 200ms, box-shadow 200ms;
}
.stat-card:hover { border-color: #383E47; box-shadow: 0 2px 8px rgba(17, 20, 24, 0.5); }
.stat-card .stat-value { font-family: 'Consolas', 'Courier New', monospace; font-size: 1.6rem; color: #C5CBD3; font-weight: 700; }
.stat-card .stat-label { font-family: -apple-system, 'Segoe UI', sans-serif; font-size: 0.7rem; text-transform: uppercase; letter-spacing: 1.5px; color: #5F6B7C; margin-top: 6px; }

/* Badges — single monochrome style, Palantir Blueprint DG2 */
.badge { display: inline-block; padding: 2px 8px; border-radius: 2px; font-size: 0.68rem; font-weight: 500; letter-spacing: 0.8px; text-transform: uppercase; font-family: 'Consolas', 'Courier New', monospace; background: #252A31; color: #8F99A8; border: 1px solid #383E47; }

/* Search/filter box */
.filter-box {
  display: flex; gap: 8px; margin: 16px 0; flex-wrap: wrap;
}
.filter-box input {
  background: #1C2127; border: 1px solid #383E47; border-radius: 3px;
  color: #C5CBD3; padding: 8px 14px;
  font-family: -apple-system, 'Segoe UI', sans-serif; font-size: 0.85rem;
  outline: none; flex: 1; min-width: 200px;
  transition: border-color 100ms, box-shadow 100ms;
}
.filter-box input:focus { border-color: #ABB3BF; box-shadow: 0 0 0 1px rgba(171, 179, 191, 0.3); }

/* Filter pills */
.filter-pills { display: flex; flex-wrap: wrap; gap: 6px; margin: 12px 0; }
.filter-pill {
  display: inline-block; padding: 4px 12px;
  background: #1C2127; border: 1px solid #2F343C; border-radius: 3px;
  font-family: -apple-system, 'Segoe UI', sans-serif; font-size: 0.75rem;
  color: #8F99A8; cursor: pointer;
  transition: background-color 100ms, border-color 100ms, color 100ms;
}
.filter-pill:hover, .filter-pill.active { background: #252A31; border-color: #383E47; color: #C5CBD3; }
.filter-pill .count { font-family: 'Consolas', 'Courier New', monospace; font-size: 0.7rem; color: #5F6B7C; margin-left: 4px; }

/* Buttons */
.btn {
  background: #252A31; border: 1px solid #383E47; border-radius: 3px;
  color: #C5CBD3; padding: 8px 18px; display: inline-block;
  font-family: -apple-system, 'Segoe UI', sans-serif; font-size: 0.82rem;
  cursor: pointer; text-transform: uppercase; letter-spacing: 1px;
  transition: background-color 100ms, border-color 100ms, color 100ms, box-shadow 100ms;
  text-decoration: none;
}
.btn:hover { background: #383E47; color: #FFFFFF; box-shadow: 0 1px 4px rgba(17, 20, 24, 0.4); text-decoration: none; }
.btn-primary { background: #2D72D2; border-color: #2D72D2; color: #fff; }
.btn-primary:hover { background: #215DB0; }
.btn-disabled { opacity: 0.4; cursor: not-allowed; pointer-events: none; }

/* Caveat */
.caveat {
  margin-top: 20px; padding: 12px 16px; background: #1C2127;
  border: 1px solid #2F343C; border-radius: 4px;
  font-size: 0.82rem; color: #8F99A8; line-height: 1.6; max-width: 960px;
}
.caveat strong { font-family: -apple-system, 'Segoe UI', sans-serif; font-size: 0.7rem; text-transform: uppercase; letter-spacing: 1px; color: #ABB3BF; }

/* Screenshot gallery — Palantir-style interactive */
.gallery-section {
  margin: 24px 0; perspective: 1200px; overflow: hidden;
}

/* ── Per-card navigation arrows (on each picture) ── */
.card-arrow {
  position: absolute; top: 50%; transform: translateY(-70%);
  width: 36px; height: 36px; border-radius: 50%;
  background: rgba(17, 20, 24, 0.75); border: 1px solid rgba(255,255,255,0.12);
  color: #ABB3BF; font-size: 0.95rem; cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  z-index: 5; backdrop-filter: blur(8px);
  opacity: 0; transition: opacity 200ms, background 150ms, border-color 150ms, color 150ms, transform 150ms;
}
.gallery-card:hover .card-arrow { opacity: 1; }
.card-arrow:hover {
  background: rgba(17, 20, 24, 0.95); border-color: rgba(255,255,255,0.35);
  color: #fff;
}
.card-arrow:active { transform: translateY(-70%) scale(0.88); }
.card-arrow.left { left: 10px; }
.card-arrow.right { right: 10px; }

/* ── Track (horizontal drag-scroll) ── */
.gallery-track {
  display: flex; gap: 20px; padding: 24px 4px 32px;
  overflow-x: auto; overflow-y: hidden;
  scrollbar-width: none; -ms-overflow-style: none;
  cursor: grab; user-select: none;
  -webkit-overflow-scrolling: touch;
}
.gallery-track::-webkit-scrollbar { display: none; }
.gallery-track.dragging { cursor: grabbing; scroll-behavior: auto; }

/* ── Card ── */
.gallery-card {
  flex: 0 0 420px; position: relative;
  border-radius: 8px; overflow: hidden;
  background: #1C2127; border: 1px solid #2F343C;
  transform-style: preserve-3d;
  transition: transform 0.4s cubic-bezier(0.03, 0.98, 0.52, 0.99),
              box-shadow 0.4s cubic-bezier(0.03, 0.98, 0.52, 0.99),
              border-color 0.3s ease;
  will-change: transform;
}
.gallery-card:hover {
  border-color: #404854;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5), 0 0 40px rgba(45, 114, 210, 0.08);
  z-index: 2;
}

/* ── Cursor glow overlay ── */
.gallery-card::before {
  content: '';
  position: absolute; inset: 0;
  background: radial-gradient(
    600px circle at var(--mouse-x, 50%) var(--mouse-y, 50%),
    rgba(45, 114, 210, 0.06),
    transparent 40%
  );
  z-index: 3; pointer-events: none;
  opacity: 0; transition: opacity 0.3s ease;
}
.gallery-card:hover::before { opacity: 1; }

/* ── Border glow ── */
.gallery-card::after {
  content: '';
  position: absolute; inset: -1px;
  background: radial-gradient(
    400px circle at var(--mouse-x, 50%) var(--mouse-y, 50%),
    rgba(45, 114, 210, 0.25),
    transparent 40%
  );
  z-index: -1; border-radius: 9px;
  opacity: 0; transition: opacity 0.3s ease;
}
.gallery-card:hover::after { opacity: 1; }

/* ── Image wrapper with parallax ── */
.gallery-img-wrap {
  overflow: hidden; height: 280px; position: relative;
}
.gallery-img-wrap img {
  width: 110%; height: 110%; object-fit: cover; object-position: top left;
  display: block;
  transform: translate(calc(var(--px, 0) * -10px), calc(var(--py, 0) * -10px));
  transition: transform 0.4s cubic-bezier(0.03, 0.98, 0.52, 0.99);
  will-change: transform;
}

/* ── Caption ── */
.gallery-caption {
  padding: 16px 20px;
  border-top: 1px solid #252A31;
  position: relative; z-index: 2;
}
.gallery-caption strong {
  font-family: -apple-system, 'Segoe UI', sans-serif;
  color: #C5CBD3; font-size: 0.88rem; display: block; margin-bottom: 4px;
}
.gallery-caption span {
  font-family: -apple-system, 'Segoe UI', sans-serif;
  font-size: 0.78rem; color: #5F6B7C; line-height: 1.5;
}

/* ── Progress bar (auto-advance indicator) ── */
.gallery-progress {
  display: flex; justify-content: center; gap: 6px;
  margin-top: 8px; padding: 0 4px;
}
.gallery-pip {
  height: 3px; flex: 1; max-width: 48px;
  background: #252A31; border-radius: 2px;
  overflow: hidden; cursor: pointer;
  transition: background 200ms;
}
.gallery-pip:hover { background: #383E47; }
.gallery-pip.active { background: transparent; }
.gallery-pip-fill {
  height: 100%; width: 0; background: #5F6B7C;
  border-radius: 2px;
}
.gallery-pip.active .gallery-pip-fill {
  width: 100%;
  transition: width 6s linear;
}
.gallery-pip.past .gallery-pip-fill {
  width: 100%; background: #383E47;
}

/* ── Lightbox ── */
.gallery-lightbox {
  position: fixed; inset: 0; z-index: 1000;
  background: rgba(17, 20, 24, 0.92); backdrop-filter: blur(12px);
  display: none; align-items: center; justify-content: center;
  cursor: zoom-out;
}
.gallery-lightbox.open { display: flex; }
.gallery-lightbox img {
  max-width: 92vw; max-height: 88vh; object-fit: contain;
  border-radius: 6px; border: 1px solid #2F343C;
  box-shadow: 0 24px 80px rgba(0, 0, 0, 0.6);
}
.gallery-lightbox .lb-caption {
  position: absolute; bottom: 24px; left: 50%; transform: translateX(-50%);
  font-family: -apple-system, 'Segoe UI', sans-serif;
  font-size: 0.82rem; color: #8F99A8; background: rgba(28, 33, 39, 0.85);
  padding: 10px 20px; border-radius: 4px; border: 1px solid #2F343C;
  text-align: center; max-width: 600px;
  backdrop-filter: blur(8px);
}
.gallery-lightbox .lb-caption strong { color: #C5CBD3; display: block; margin-bottom: 2px; }

/* ── Scroll-triggered fade-in ── */
.gallery-section {
  opacity: 0; transform: translateY(30px);
  transition: opacity 0.8s cubic-bezier(0.16, 1, 0.3, 1),
              transform 0.8s cubic-bezier(0.16, 1, 0.3, 1);
}
.gallery-section.visible {
  opacity: 1; transform: translateY(0);
}

/* Footer */
footer {
  padding: 24px 40px; border-top: 3px double #2F343C;
  font-family: -apple-system, 'Segoe UI', sans-serif; font-size: 0.7rem;
  color: #404854; text-align: center; letter-spacing: 0.5px;
}
footer a { color: #5F6B7C; margin: 0 8px; }
footer a:hover { text-decoration: underline; color: #8F99A8; }

/* Tab content visibility */
.tab-content { display: none; }
.tab-content.active { display: block; }

/* Responsive */
@media (max-width: 1024px) {
  .sidebar { width: 180px; }
  .sidebar a { padding: 7px 14px; font-size: 0.78rem; }
  .main-content { padding: 24px 24px; }
}
@media (max-width: 800px) {
  .layout { flex-direction: column; }
  .sidebar {
    width: 100%; height: auto; position: relative; top: 0;
    border-right: none; border-bottom: 1px solid #2F343C;
    padding: 8px 0; display: flex; flex-wrap: wrap; align-items: center;
    overflow-x: auto; overflow-y: hidden;
  }
  .sidebar-title { padding: 0 12px; margin-bottom: 0; }
  .sidebar .nav-section { display: none; }
  .sidebar a {
    display: inline-block; padding: 6px 12px; border-left: none;
    border-bottom: 2px solid transparent; font-size: 0.75rem; white-space: nowrap;
  }
  .sidebar a:hover, .sidebar a.active { background: none; border-left-color: transparent; border-bottom-color: #C5CBD3; }
  .main-content { padding: 20px 16px; max-width: 100%; }
  .stat-grid { grid-template-columns: repeat(2, 1fr); gap: 10px; }
  .data-table { display: block; overflow-x: auto; }
  .gallery-card { flex: 0 0 320px; }
  .gallery-img-wrap { height: 200px; }
  .gallery-track { gap: 14px; padding: 16px 4px 24px; }
  .card-arrow { width: 30px; height: 30px; font-size: 0.8rem; }
  .card-arrow.left { left: 6px; }
  .card-arrow.right { right: 6px; }
}
@media (max-width: 480px) {
  .banner { font-size: 0.55rem; letter-spacing: 2px; padding: 4px 0; }
  .main-content { padding: 14px 12px; }
  .page-header h1 { font-size: 1rem; letter-spacing: 1px; }
  .stat-grid { grid-template-columns: 1fr; }
  .stat-card .stat-value { font-size: 1.3rem; }
  footer { padding: 16px 12px; }
}
</style>
</head>
<body>

<div class="banner">UNCLASSIFIED // OPEN SOURCE INTELLIGENCE</div>

<div class="layout">
  <nav class="sidebar">
    <div class="sidebar-title">Factbook Archive</div>
    <a href="javascript:void(0)" onclick="showTab('overview')" id="nav-overview" class="active">Home</a>
    <a href="javascript:void(0)" onclick="showTab('countries')" id="nav-countries">Country Dictionary</a>

    <div class="nav-section">Reference</div>
    <a href="https://github.com/MilkMp/CIA-World-Factbooks-Archive-1990-2025" target="_blank">GitHub Repository</a>
    <a href="https://github.com/MilkMp/CIA-World-Factbooks-Archive-1990-2025/releases" target="_blank">Download Data</a>
  </nav>

  <main class="main-content">

    <!-- ============================================================ -->
    <!-- OVERVIEW TAB                                                 -->
    <!-- ============================================================ -->
    <div id="tab-overview" class="tab-content active">

      <div class="page-header">
        <div class="doc-id">UNCLASSIFIED // OPEN SOURCE INTELLIGENCE ARCHIVE</div>
        <h1>CIA World Factbook 1990 &ndash; 2025</h1>
        <div class="subtitle">36 years of geopolitical intelligence preserved and structured for analysis.</div>
      </div>

      <div class="stat-grid">
        <div class="stat-card">
          <div class="stat-value">281</div>
          <div class="stat-label">Entities</div>
        </div>
        <div class="stat-card">
          <div class="stat-value">36</div>
          <div class="stat-label">Editions</div>
        </div>
        <div class="stat-card">
          <div class="stat-value">9,500</div>
          <div class="stat-label">Country-Year Records</div>
        </div>
        <div class="stat-card">
          <div class="stat-value">1,061,522</div>
          <div class="stat-label">Parsed Data Fields</div>
        </div>
      </div>

      <div style="text-align:center; margin:24px 0;">
        <a href="https://cia-factbook-archive.fly.dev/" target="_blank"
           style="display:inline-block; padding:12px 32px; background:#2D72D2; color:#fff;
                  border-radius:4px; font-family:-apple-system,'Segoe UI',sans-serif;
                  font-size:0.9rem; font-weight:600; letter-spacing:0.5px;
                  text-decoration:none; transition:background 150ms;">
          Launch Interactive Archive
        </a>
        <div style="margin-top:8px; font-size:0.72rem; color:#5F6B7C; font-family:-apple-system,'Segoe UI',sans-serif;">
          Search, browse, and analyze all 1,061,522 fields across 36 years
        </div>
      </div>

      <hr class="doc-rule">

      <div class="sec">
        <span class="sec-num">ABOUT</span>
        <span class="sec-title">About This Archive</span>
        <hr class="sec-rule">
      </div>

      <p>The CIA World Factbook was published continuously from 1962 until its discontinuation on February 4, 2026. This archive preserves every publicly available edition from 1990 to 2025 in a structured, queryable SQL Server database.</p>
      <p>Data was collected from three sources: Project Gutenberg and CIA original text files (1990s plain text editions), the Wayback Machine (2000-2020 HTML archives), and the <a href="https://github.com/factbook/cache.factbook.json" target="_blank">factbook/cache.factbook.json</a> GitHub repository (2021-2025 JSON snapshots).</p>

      <table class="data-table">
        <thead>
          <tr><th>Years</th><th>Source</th><th>Format</th></tr>
        </thead>
        <tbody>
          <tr><td>1990-1999</td><td>Project Gutenberg + CIA original (1996)</td><td>Plain text (4 format variants)</td></tr>
          <tr><td>2000-2020</td><td>Wayback Machine</td><td>HTML zip archives (5 parser generations)</td></tr>
          <tr><td>2021-2025</td><td>GitHub (factbook/cache.factbook.json)</td><td>JSON with year-end git snapshots</td></tr>
        </tbody>
      </table>

      <div class="sec">
        <span class="sec-num">SCHEMA</span>
        <span class="sec-title">Database Schema</span>
        <hr class="sec-rule">
      </div>

      <table class="data-table">
        <thead>
          <tr><th>Table</th><th>Rows</th><th>Description</th></tr>
        </thead>
        <tbody>
          <tr><td class="mono">MasterCountries</td><td class="r">281</td><td>Canonical entities with EntityType, ISO codes</td></tr>
          <tr><td class="mono">Countries</td><td class="r">9,500</td><td>Per-year country records</td></tr>
          <tr><td class="mono">CountryCategories</td><td class="r">83,599</td><td>Section headings (Geography, Economy, etc.)</td></tr>
          <tr><td class="mono">CountryFields</td><td class="r">1,061,522</td><td>Individual data fields (~238 MB)</td></tr>
          <tr><td class="mono">FieldNameMappings</td><td class="r">1,090</td><td>Maps 1,090 variants to 414 canonical names</td></tr>
        </tbody>
      </table>

      <div class="sec">
        <span class="sec-num">GALLERY</span>
        <span class="sec-title">Application Screenshots</span>
        <hr class="sec-rule">
      </div>

      <div class="gallery-section" id="gallery-section">
        <div class="gallery-track" id="gallery-track">
          <!-- The Archive -->
          <div class="gallery-card" data-idx="0">
            <button class="card-arrow left" aria-label="Previous">&#10094;</button>
            <div class="gallery-img-wrap"><img src="screenshots/library.png" alt="Library" loading="lazy"></div>
            <button class="card-arrow right" aria-label="Next">&#10095;</button>
            <div class="gallery-caption"><strong>Library</strong><span>All entities with flags, grouped by type</span></div>
          </div>
          <div class="gallery-card" data-idx="1">
            <button class="card-arrow left" aria-label="Previous">&#10094;</button>
            <div class="gallery-img-wrap"><img src="screenshots/country_profile.png" alt="Country Profile" loading="lazy"></div>
            <button class="card-arrow right" aria-label="Next">&#10095;</button>
            <div class="gallery-caption"><strong>Country Profile</strong><span>Complete field data for any entity by category</span></div>
          </div>
          <div class="gallery-card" data-idx="2">
            <button class="card-arrow left" aria-label="Previous">&#10094;</button>
            <div class="gallery-img-wrap"><img src="screenshots/search_results.png" alt="Full-Text Search" loading="lazy"></div>
            <button class="card-arrow right" aria-label="Next">&#10095;</button>
            <div class="gallery-caption"><strong>Full-Text Search</strong><span>Keyword search across 1M+ fields with Z39.58 syntax</span></div>
          </div>
          <div class="gallery-card" data-idx="3">
            <button class="card-arrow left" aria-label="Previous">&#10094;</button>
            <div class="gallery-img-wrap"><img src="screenshots/field_timeseries.png" alt="Field Time Series" loading="lazy"></div>
            <button class="card-arrow right" aria-label="Next">&#10095;</button>
            <div class="gallery-caption"><strong>Field Time Series</strong><span>Track any data field across 36 years</span></div>
          </div>
          <div class="gallery-card" data-idx="4">
            <button class="card-arrow left" aria-label="Previous">&#10094;</button>
            <div class="gallery-img-wrap"><img src="screenshots/quiz.png" alt="Factbook Quiz" loading="lazy"></div>
            <button class="card-arrow right" aria-label="Next">&#10095;</button>
            <div class="gallery-caption"><strong>Factbook Quiz</strong><span>4 game modes to test your world knowledge</span></div>
          </div>
          <div class="gallery-card" data-idx="5">
            <button class="card-arrow left" aria-label="Previous">&#10094;</button>
            <div class="gallery-img-wrap"><img src="screenshots/country_export.png" alt="Factbook Export" loading="lazy"></div>
            <button class="card-arrow right" aria-label="Next">&#10095;</button>
            <div class="gallery-caption"><strong>Factbook Export</strong><span>Print-ready country report with all parsed fields</span></div>
          </div>
          <div class="gallery-card" data-idx="6">
            <button class="card-arrow left" aria-label="Previous">&#10094;</button>
            <div class="gallery-img-wrap"><img src="screenshots/homepage.png" alt="Homepage" loading="lazy"></div>
            <button class="card-arrow right" aria-label="Next">&#10095;</button>
            <div class="gallery-caption"><strong>Homepage</strong><span>Landing page with database statistics and navigation</span></div>
          </div>
          <!-- Intelligence Analysis -->
          <div class="gallery-card" data-idx="7">
            <button class="card-arrow left" aria-label="Previous">&#10094;</button>
            <div class="gallery-img-wrap"><img src="screenshots/regional_dashboard.png" alt="Regional Dashboard" loading="lazy"></div>
            <button class="card-arrow right" aria-label="Next">&#10095;</button>
            <div class="gallery-caption"><strong>Regional Dashboard</strong><span>Globe choropleth with COCOM regions and capital markers</span></div>
          </div>
          <div class="gallery-card" data-idx="8">
            <button class="card-arrow left" aria-label="Previous">&#10094;</button>
            <div class="gallery-img-wrap"><img src="screenshots/timeline_map.png" alt="Timeline Map" loading="lazy"></div>
            <button class="card-arrow right" aria-label="Next">&#10095;</button>
            <div class="gallery-caption"><strong>Timeline Map</strong><span>Animated choropleth across 36 years with time series</span></div>
          </div>
          <div class="gallery-card" data-idx="9">
            <button class="card-arrow left" aria-label="Previous">&#10094;</button>
            <div class="gallery-img-wrap"><img src="screenshots/communications.png" alt="Communications Analysis" loading="lazy"></div>
            <button class="card-arrow right" aria-label="Next">&#10095;</button>
            <div class="gallery-caption"><strong>Communications Analysis</strong><span>Internet, mobile, broadband penetration indicators</span></div>
          </div>
          <div class="gallery-card" data-idx="10">
            <button class="card-arrow left" aria-label="Previous">&#10094;</button>
            <div class="gallery-img-wrap"><img src="screenshots/map_compare.png" alt="Map Compare" loading="lazy"></div>
            <button class="card-arrow right" aria-label="Next">&#10095;</button>
            <div class="gallery-caption"><strong>Map Compare</strong><span>Two synced maps for side-by-side year comparison</span></div>
          </div>
          <div class="gallery-card" data-idx="11">
            <button class="card-arrow left" aria-label="Previous">&#10094;</button>
            <div class="gallery-img-wrap"><img src="screenshots/region_eucom.png" alt="EUCOM Region" loading="lazy"></div>
            <button class="card-arrow right" aria-label="Next">&#10095;</button>
            <div class="gallery-caption"><strong>COCOM Region Detail</strong><span>Regional map with country-level KPIs and indicators</span></div>
          </div>
          <div class="gallery-card" data-idx="12">
            <button class="card-arrow left" aria-label="Previous">&#10094;</button>
            <div class="gallery-img-wrap"><img src="screenshots/dossier.png" alt="Intelligence Dossier" loading="lazy"></div>
            <button class="card-arrow right" aria-label="Next">&#10095;</button>
            <div class="gallery-caption"><strong>Intelligence Dossier</strong><span>ICD 203 country assessments with all indicators</span></div>
          </div>
          <div class="gallery-card" data-idx="13">
            <button class="card-arrow left" aria-label="Previous">&#10094;</button>
            <div class="gallery-img-wrap"><img src="screenshots/rankings.png" alt="Global Rankings" loading="lazy"></div>
            <button class="card-arrow right" aria-label="Next">&#10095;</button>
            <div class="gallery-caption"><strong>Global Rankings</strong><span>Sortable country rankings by any indicator</span></div>
          </div>
          <div class="gallery-card" data-idx="14">
            <button class="card-arrow left" aria-label="Previous">&#10094;</button>
            <div class="gallery-img-wrap"><img src="screenshots/global_trends.png" alt="Global Trends" loading="lazy"></div>
            <button class="card-arrow right" aria-label="Next">&#10095;</button>
            <div class="gallery-caption"><strong>Global Trends</strong><span>Worldwide indicator trends across all editions</span></div>
          </div>
          <div class="gallery-card" data-idx="15">
            <button class="card-arrow left" aria-label="Previous">&#10094;</button>
            <div class="gallery-img-wrap"><img src="screenshots/compare_countries.png" alt="Compare Countries" loading="lazy"></div>
            <button class="card-arrow right" aria-label="Next">&#10095;</button>
            <div class="gallery-caption"><strong>Compare Countries</strong><span>Side-by-side indicator comparison</span></div>
          </div>
          <div class="gallery-card" data-idx="16">
            <button class="card-arrow left" aria-label="Previous">&#10094;</button>
            <div class="gallery-img-wrap"><img src="screenshots/field_explorer.png" alt="Field Explorer" loading="lazy"></div>
            <button class="card-arrow right" aria-label="Next">&#10095;</button>
            <div class="gallery-caption"><strong>Field Explorer</strong><span>Browse all data fields with coverage statistics</span></div>
          </div>
          <div class="gallery-card" data-idx="17">
            <button class="card-arrow left" aria-label="Previous">&#10094;</button>
            <div class="gallery-img-wrap"><img src="screenshots/change_detection.png" alt="Change Detection" loading="lazy"></div>
            <button class="card-arrow right" aria-label="Next">&#10095;</button>
            <div class="gallery-caption"><strong>Change Detection</strong><span>Year-over-year field changes for any country</span></div>
          </div>
          <div class="gallery-card" data-idx="18">
            <button class="card-arrow left" aria-label="Previous">&#10094;</button>
            <div class="gallery-img-wrap"><img src="screenshots/dissolved_states.png" alt="Dissolved States" loading="lazy"></div>
            <button class="card-arrow right" aria-label="Next">&#10095;</button>
            <div class="gallery-caption"><strong>Dissolved States</strong><span>Historical entities no longer in the Factbook</span></div>
          </div>
          <div class="gallery-card" data-idx="19">
            <button class="card-arrow left" aria-label="Previous">&#10094;</button>
            <div class="gallery-img-wrap"><img src="screenshots/trade_networks.png" alt="Trade Networks" loading="lazy"></div>
            <button class="card-arrow right" aria-label="Next">&#10095;</button>
            <div class="gallery-caption"><strong>Trade Networks</strong><span>Geographic layout of global trade relationships</span></div>
          </div>
          <div class="gallery-card" data-idx="20">
            <button class="card-arrow left" aria-label="Previous">&#10094;</button>
            <div class="gallery-img-wrap"><img src="screenshots/org_networks.png" alt="Organization Networks" loading="lazy"></div>
            <button class="card-arrow right" aria-label="Next">&#10095;</button>
            <div class="gallery-caption"><strong>Organization Networks</strong><span>International org memberships and alliances</span></div>
          </div>
        </div>
        <div class="gallery-progress" id="gallery-progress"></div>
      </div>

      <!-- Lightbox -->
      <div class="gallery-lightbox" id="gallery-lightbox">
        <img src="" alt="">
        <div class="lb-caption"><strong></strong><span></span></div>
      </div>

      <hr class="doc-rule">

      <div class="sec">
        <span class="sec-num">RESTORE</span>
        <span class="sec-title">How to Restore</span>
        <hr class="sec-rule">
      </div>

      <p>The data is provided as SQL INSERT scripts compatible with SQL Server 2017+. The <span style="font-family: Consolas, 'Courier New', monospace; font-size: 0.85rem; color: #C5CBD3;">CountryFields</span> table is split into 36 gzipped files by year (~59 MB total compressed).</p>

      <p style="margin-bottom: 4px;">To restore the archive locally:</p>
      <div style="margin-left: 16px; margin-bottom: 20px; font-size: 0.88rem; color: #8F99A8; line-height: 2;">
        1. Create a database: <span style="font-family: Consolas, 'Courier New', monospace; font-size: 0.82rem; color: #C5CBD3;">CREATE DATABASE CIA_WorldFactbook</span><br>
        2. Run <span style="font-family: Consolas, 'Courier New', monospace; font-size: 0.82rem; color: #C5CBD3;">schema/create_tables.sql</span><br>
        3. Import <span style="font-family: Consolas, 'Courier New', monospace; font-size: 0.82rem; color: #C5CBD3;">data/master_countries.sql</span>, then <span style="font-family: Consolas, 'Courier New', monospace; font-size: 0.82rem; color: #C5CBD3;">countries.sql</span>, <span style="font-family: Consolas, 'Courier New', monospace; font-size: 0.82rem; color: #C5CBD3;">categories.sql</span>, <span style="font-family: Consolas, 'Courier New', monospace; font-size: 0.82rem; color: #C5CBD3;">field_name_mappings.sql</span><br>
        4. Decompress and import each <span style="font-family: Consolas, 'Courier New', monospace; font-size: 0.82rem; color: #C5CBD3;">data/fields/country_fields_YYYY.sql.gz</span>
      </div>

      <div style="margin: 24px 0; display: flex; gap: 12px; flex-wrap: wrap;">
        <a href="https://github.com/MilkMp/CIA-World-Factbooks-Archive-1990-2025" target="_blank" class="btn btn-primary">View on GitHub</a>
        <a href="https://github.com/MilkMp/CIA-World-Factbooks-Archive-1990-2025/releases" target="_blank" class="btn">Download Data</a>
      </div>

      <hr class="doc-rule">

      <div class="sec">
        <span class="sec-num">ETL</span>
        <span class="sec-title">ETL Pipeline &amp; Python Scripts</span>
        <hr class="sec-rule">
      </div>

      <p>The raw CIA World Factbook changed format <strong style="color:#C5CBD3;">at least 10 times</strong> between 1990 and 2025. The ETL pipeline downloads original source data, parses every format variant, and loads structured results into SQL Server via pyodbc.</p>

      <table class="data-table">
        <thead>
          <tr><th>Script</th><th>Years</th><th>What It Does</th></tr>
        </thead>
        <tbody>
          <tr><td class="mono">build_archive.py</td><td>2000&ndash;2020</td><td>Downloads HTML zips from the Wayback Machine, detects which of 5 HTML layouts each year uses, and parses fields</td></tr>
          <tr><td class="mono">load_gutenberg_years.py</td><td>1990&ndash;2001</td><td>Parses plain-text Gutenberg editions with 4 distinct format variants (tagged, asterisk, at-sign, colon); 1996 supplemented by CIA original text</td></tr>
          <tr><td class="mono">reload_json_years.py</td><td>2021&ndash;2025</td><td>Checks out year-end git commits from factbook/cache.factbook.json and loads structured JSON</td></tr>
          <tr><td class="mono">build_field_mappings.py</td><td>All</td><td>Maps 1,090 raw field name variants to 414 canonical names using a 7-rule system</td></tr>
          <tr><td class="mono">classify_entities.py</td><td>All</td><td>Auto-classifies 281 entities into 9 types based on Dependency Status and Government Type fields</td></tr>
          <tr><td class="mono">validate_integrity.py</td><td>All</td><td>Read-only validation with 9 checks: field count benchmarks, ground truth, year-over-year consistency</td></tr>
        </tbody>
      </table>

      <div class="sec" style="margin-top: 20px;">
        <span class="sec-num">PARSING</span>
        <span class="sec-title">Why Parsing Was So Difficult</span>
        <hr class="sec-rule">
      </div>

      <p>The CIA never maintained a stable schema. Every few years the HTML layout changed completely, field names were renamed without notice, and entire categories were restructured.</p>

      <div style="margin: 16px 0 20px; padding: 16px 20px; background: #1C2127; border: 1px solid #2F343C; border-radius: 4px; font-size: 0.85rem; color: #8F99A8; line-height: 1.8;">
        <strong style="color: #C5CBD3; font-family: -apple-system, 'Segoe UI', sans-serif; font-size: 0.72rem; text-transform: uppercase; letter-spacing: 1px;">1990&ndash;1999 (Plain Text)</strong><br>
        Four different formatting conventions across the decade. 1990&ndash;1993 used indented fields. 1994 introduced tagged markers. 1996 switched to bare section headers. 1999 changed the delimiter scheme again. Each variant required its own regex-based parser.
        <br><br>
        <strong style="color: #C5CBD3; font-family: -apple-system, 'Segoe UI', sans-serif; font-size: 0.72rem; text-transform: uppercase; letter-spacing: 1px;">2000&ndash;2020 (HTML)</strong><br>
        The CIA redesigned the Factbook website at least 5 times. The 2000 edition used inline &lt;b&gt; formatting. By 2004 it switched to table layouts. 2008 introduced CollapsiblePanel JavaScript widgets. 2014 changed to expand/collapse sections. 2017 moved to field-anchor div structures. A parser that worked on 2006 data would produce garbage on 2010 data.
        <br><br>
        <strong style="color: #C5CBD3; font-family: -apple-system, 'Segoe UI', sans-serif; font-size: 0.72rem; text-transform: uppercase; letter-spacing: 1px;">Field Name Drift</strong><br>
        The CIA renamed fields silently over the decades. &ldquo;GDP - real growth rate&rdquo; became &ldquo;Real GDP growth rate.&rdquo; &ldquo;Telephones&rdquo; split into &ldquo;Telephones - fixed lines&rdquo; and &ldquo;Telephones - mobile cellular.&rdquo; The field mapping script tracks all 1,090 variants through 7 rule layers.
      </div>

      <hr class="doc-rule">

      <div class="sec">
        <span class="sec-num">EDITIONS</span>
        <span class="sec-title">Year-by-Year Breakdown</span>
        <hr class="sec-rule">
      </div>

      <table class="data-table">
        <thead>
          <tr><th>Year</th><th>Source</th><th style="text-align:right;">Countries</th><th style="text-align:right;">Fields</th></tr>
        </thead>
        <tbody>
          <tr><td class="mono">1990</td><td><span class="badge badge-text">TEXT</span></td><td class="r">249</td><td class="r">15,750</td></tr>
          <tr><td class="mono">1991</td><td><span class="badge badge-text">TEXT</span></td><td class="r">247</td><td class="r">14,903</td></tr>
          <tr><td class="mono">1992</td><td><span class="badge badge-text">TEXT</span></td><td class="r">264</td><td class="r">17,372</td></tr>
          <tr><td class="mono">1993</td><td><span class="badge badge-text">TEXT</span></td><td class="r">266</td><td class="r">18,509</td></tr>
          <tr><td class="mono">1994</td><td><span class="badge badge-text">TEXT</span></td><td class="r">266</td><td class="r">18,761</td></tr>
          <tr><td class="mono">1995</td><td><span class="badge badge-text">TEXT</span></td><td class="r">266</td><td class="r">19,599</td></tr>
          <tr><td class="mono">1996</td><td><span class="badge badge-text">TEXT</span></td><td class="r">266</td><td class="r">20,764</td></tr>
          <tr><td class="mono">1997</td><td><span class="badge badge-text">TEXT</span></td><td class="r">266</td><td class="r">23,405</td></tr>
          <tr><td class="mono">1998</td><td><span class="badge badge-text">TEXT</span></td><td class="r">266</td><td class="r">23,524</td></tr>
          <tr><td class="mono">1999</td><td><span class="badge badge-text">TEXT</span></td><td class="r">266</td><td class="r">25,178</td></tr>
          <tr><td class="mono">2000</td><td><span class="badge badge-html">HTML</span></td><td class="r">267</td><td class="r">25,724</td></tr>
          <tr><td class="mono">2001</td><td><span class="badge badge-text">TEXT</span></td><td class="r">265</td><td class="r">27,281</td></tr>
          <tr><td class="mono">2002</td><td><span class="badge badge-html">HTML</span></td><td class="r">268</td><td class="r">27,430</td></tr>
          <tr><td class="mono">2003</td><td><span class="badge badge-html">HTML</span></td><td class="r">268</td><td class="r">28,676</td></tr>
          <tr><td class="mono">2004</td><td><span class="badge badge-html">HTML</span></td><td class="r">271</td><td class="r">28,958</td></tr>
          <tr><td class="mono">2005</td><td><span class="badge badge-html">HTML</span></td><td class="r">271</td><td class="r">28,728</td></tr>
          <tr><td class="mono">2006</td><td><span class="badge badge-html">HTML</span></td><td class="r">262</td><td class="r">28,950</td></tr>
          <tr><td class="mono">2007</td><td><span class="badge badge-html">HTML</span></td><td class="r">259</td><td class="r">29,096</td></tr>
          <tr><td class="mono">2008</td><td><span class="badge badge-html">HTML</span></td><td class="r">261</td><td class="r">30,753</td></tr>
          <tr><td class="mono">2009</td><td><span class="badge badge-html">HTML</span></td><td class="r">260</td><td class="r">30,818</td></tr>
          <tr><td class="mono">2010</td><td><span class="badge badge-html">HTML</span></td><td class="r">262</td><td class="r">30,805</td></tr>
          <tr><td class="mono">2011</td><td><span class="badge badge-html">HTML</span></td><td class="r">262</td><td class="r">33,634</td></tr>
          <tr><td class="mono">2012</td><td><span class="badge badge-html">HTML</span></td><td class="r">262</td><td class="r">35,183</td></tr>
          <tr><td class="mono">2013</td><td><span class="badge badge-html">HTML</span></td><td class="r">267</td><td class="r">36,729</td></tr>
          <tr><td class="mono">2014</td><td><span class="badge badge-html">HTML</span></td><td class="r">267</td><td class="r">36,679</td></tr>
          <tr><td class="mono">2015</td><td><span class="badge badge-html">HTML</span></td><td class="r">266</td><td class="r">36,868</td></tr>
          <tr><td class="mono">2016</td><td><span class="badge badge-html">HTML</span></td><td class="r">268</td><td class="r">36,804</td></tr>
          <tr><td class="mono">2017</td><td><span class="badge badge-html">HTML</span></td><td class="r">268</td><td class="r">37,046</td></tr>
          <tr><td class="mono">2018</td><td><span class="badge badge-html">HTML</span></td><td class="r">268</td><td class="r">37,285</td></tr>
          <tr><td class="mono">2019</td><td><span class="badge badge-html">HTML</span></td><td class="r">268</td><td class="r">37,394</td></tr>
          <tr><td class="mono">2020</td><td><span class="badge badge-html">HTML</span></td><td class="r">268</td><td class="r">36,687</td></tr>
          <tr><td class="mono">2021</td><td><span class="badge badge-json">JSON</span></td><td class="r">260</td><td class="r">39,714</td></tr>
          <tr><td class="mono">2022</td><td><span class="badge badge-json">JSON</span></td><td class="r">260</td><td class="r">37,344</td></tr>
          <tr><td class="mono">2023</td><td><span class="badge badge-json">JSON</span></td><td class="r">260</td><td class="r">37,558</td></tr>
          <tr><td class="mono">2024</td><td><span class="badge badge-json">JSON</span></td><td class="r">260</td><td class="r">34,838</td></tr>
          <tr><td class="mono">2025</td><td><span class="badge badge-json">JSON</span></td><td class="r">260</td><td class="r">32,594</td></tr>
        </tbody>
      </table>

      <hr class="doc-rule">

      <div class="sec">
        <span class="sec-num">ENTITIES</span>
        <span class="sec-title">Entity Types</span>
        <hr class="sec-rule">
      </div>

      <table class="data-table">
        <thead>
          <tr><th>Type</th><th style="text-align:right;">Count</th><th>Description</th></tr>
        </thead>
        <tbody>
          <tr><td><span class="badge badge-sovereign">sovereign</span></td><td class="r">192</td><td>Independent states</td></tr>
          <tr><td><span class="badge badge-territory">territory</span></td><td class="r">65</td><td>Dependencies, overseas territories</td></tr>
          <tr><td><span class="badge badge-misc">misc</span></td><td class="r">7</td><td>Oceans, World, European Union</td></tr>
          <tr><td><span class="badge badge-disputed">disputed</span></td><td class="r">6</td><td>Kosovo, Gaza Strip, West Bank, etc.</td></tr>
          <tr><td><span class="badge badge-other">crown dep.</span></td><td class="r">3</td><td>Jersey, Guernsey, Isle of Man</td></tr>
          <tr><td><span class="badge badge-other">freely assoc.</span></td><td class="r">3</td><td>Marshall Islands, Micronesia, Palau</td></tr>
          <tr><td><span class="badge badge-other">special admin</span></td><td class="r">2</td><td>Hong Kong, Macau</td></tr>
          <tr><td><span class="badge badge-other">dissolved</span></td><td class="r">2</td><td>Netherlands Antilles, Serbia and Montenegro</td></tr>
          <tr><td><span class="badge badge-other">antarctic</span></td><td class="r">1</td><td>Antarctica</td></tr>
        </tbody>
      </table>

      <hr class="doc-rule">

      <div class="sec">
        <span class="sec-num">FIELDS</span>
        <span class="sec-title">Field Name Standardization</span>
        <hr class="sec-rule">
      </div>

      <p>The CIA renamed many fields over the 36-year span. The <span style="font-family: Consolas, 'Courier New', monospace; font-size: 0.85rem; color: #C5CBD3;">FieldNameMappings</span> table maps 1,090 raw field name variants to 414 canonical names:</p>

      <table class="data-table">
        <thead>
          <tr><th>Mapping Type</th><th style="text-align:right;">Count</th><th>Description</th></tr>
        </thead>
        <tbody>
          <tr><td>Identity</td><td class="r">184</td><td>Modern field names (unchanged)</td></tr>
          <tr><td>Rename</td><td class="r">159</td><td>CIA renamed the field (e.g. &ldquo;GDP - real growth rate&rdquo; &rarr; &ldquo;Real GDP growth rate&rdquo;)</td></tr>
          <tr><td>Dash format</td><td class="r">64</td><td>Formatting differences (single vs double dashes)</td></tr>
          <tr><td>Consolidation</td><td class="r">48</td><td>Sub-fields merged into parents (e.g. Oil &rarr; Petroleum)</td></tr>
          <tr><td>Country-specific</td><td class="r">354</td><td>Regional sub-entries, government body names</td></tr>
          <tr><td>Noise</td><td class="r">281</td><td>Parser artifacts, fragments (flagged IsNoise=1)</td></tr>
        </tbody>
      </table>

      <hr class="doc-rule">

      <div class="caveat">
        <strong>Note</strong><br>
        All data originates from the CIA World Factbook, a public-domain U.S. Government publication. This project is not affiliated with the CIA or U.S. Government.
      </div>

    </div>

    <!-- ============================================================ -->
    <!-- COUNTRIES TAB                                                -->
    <!-- ============================================================ -->
    <div id="tab-countries" class="tab-content">

      <div class="page-header">
        <div class="doc-id">ARCHIVE // ENTITIES</div>
        <h1>Country Dictionary</h1>
        <div class="subtitle">281 entities tracked across 36 years of CIA World Factbook editions</div>
      </div>

      <div class="filter-box">
        <input type="text" id="country-filter" placeholder="Filter by name...">
      </div>

      <div class="filter-pills">
        <span class="filter-pill active" data-type="all" onclick="filterType('all')">All <span class="count">281</span></span>
        <span class="filter-pill" data-type="sovereign" onclick="filterType('sovereign')">Sovereign <span class="count">192</span></span>
        <span class="filter-pill" data-type="territory" onclick="filterType('territory')">Territory <span class="count">65</span></span>
        <span class="filter-pill" data-type="misc" onclick="filterType('misc')">Misc <span class="count">7</span></span>
        <span class="filter-pill" data-type="disputed" onclick="filterType('disputed')">Disputed <span class="count">6</span></span>
        <span class="filter-pill" data-type="crown_dependency" onclick="filterType('crown_dependency')">Crown Dep. <span class="count">3</span></span>
        <span class="filter-pill" data-type="freely_associated" onclick="filterType('freely_associated')">Freely Assoc. <span class="count">3</span></span>
        <span class="filter-pill" data-type="special_admin" onclick="filterType('special_admin')">Special Admin <span class="count">2</span></span>
        <span class="filter-pill" data-type="dissolved" onclick="filterType('dissolved')">Dissolved <span class="count">2</span></span>
        <span class="filter-pill" data-type="antarctic" onclick="filterType('antarctic')">Antarctic <span class="count">1</span></span>
      </div>

      <p id="countries-count" style="font-family: 'Consolas', 'Courier New', monospace; font-size: 0.75rem; color: #5F6B7C; margin: 8px 0;">281 entities</p>

      <table class="data-table">
        <thead>
          <tr>
            <th>Entity Name</th>
            <th>FIPS</th>
            <th>ISO-2</th>
            <th>Type</th>
            <th>Coverage</th>
            <th style="text-align: right;">Fields</th>
          </tr>
        </thead>
        <tbody id="countries-tbody"></tbody>
      </table>

    </div>


  </main>
</div>

<footer>
  CIA World Factbooks Archive 1990-2025 &mdash; A preservation project
  <br>
  <a href="https://github.com/MilkMp/CIA-World-Factbooks-Archive-1990-2025" target="_blank">GitHub</a>
  <a href="https://github.com/MilkMp/CIA-World-Factbooks-Archive-1990-2025/releases" target="_blank">Releases</a>
  <br style="margin-top: 6px;">
  <span style="display: inline-block; margin-top: 6px;">The CIA World Factbook was discontinued on February 4, 2026</span>
</footer>

<script>
const DATA = {"entities":[{"name":"Afghanistan","fips":"AF","iso2":"AF","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4701},{"name":"Akrotiri","fips":"AX","iso2":"","type":"territory","first":2004,"last":2025,"years":22,"fields":675},{"name":"Albania","fips":"AL","iso2":"AL","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4671},{"name":"Algeria","fips":"AG","iso2":"DZ","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4675},{"name":"American Samoa","fips":"AQ","iso2":"AS","type":"territory","first":1990,"last":2025,"years":36,"fields":3777},{"name":"Andorra","fips":"AN","iso2":"AD","type":"sovereign","first":1990,"last":2025,"years":36,"fields":3657},{"name":"Angola","fips":"AO","iso2":"AO","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4698},{"name":"Anguilla","fips":"AV","iso2":"AI","type":"territory","first":1990,"last":2025,"years":36,"fields":3593},{"name":"Antarctica","fips":"AY","iso2":"AQ","type":"antarctic","first":1990,"last":2025,"years":35,"fields":1186},{"name":"Antigua and Barbuda","fips":"AC","iso2":"AG","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4277},{"name":"Arctic Ocean","fips":"XQ","iso2":"","type":"misc","first":1990,"last":2025,"years":36,"fields":654},{"name":"Argentina","fips":"AR","iso2":"AR","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4780},{"name":"Armenia","fips":"AM","iso2":"AM","type":"sovereign","first":1992,"last":2025,"years":34,"fields":4437},{"name":"Aruba","fips":"AA","iso2":"AW","type":"territory","first":1990,"last":2025,"years":36,"fields":4036},{"name":"Ashmore and Cartier Islands","fips":"AT","iso2":"AU","type":"territory","first":1990,"last":2025,"years":36,"fields":1067},{"name":"Atlantic Ocean","fips":"ZH","iso2":"","type":"misc","first":1990,"last":2025,"years":36,"fields":653},{"name":"Australia","fips":"AS","iso2":"AU","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4758},{"name":"Austria","fips":"AU","iso2":"AT","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4787},{"name":"Azerbaijan","fips":"AJ","iso2":"AZ","type":"sovereign","first":1992,"last":2025,"years":34,"fields":4540},{"name":"Bahamas, The","fips":"BF","iso2":"BS","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4357},{"name":"Bahrain","fips":"BA","iso2":"BH","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4520},{"name":"Baker Island","fips":"FQ","iso2":"UM","type":"territory","first":1990,"last":2020,"years":21,"fields":436},{"name":"Bangladesh","fips":"BG","iso2":"BD","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4723},{"name":"Barbados","fips":"BB","iso2":"BB","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4418},{"name":"Bassas da India","fips":"BS","iso2":"RE","type":"territory","first":1990,"last":2005,"years":16,"fields":398},{"name":"Belarus","fips":"BO","iso2":"BY","type":"sovereign","first":1992,"last":2025,"years":34,"fields":4519},{"name":"Belgium","fips":"BE","iso2":"BE","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4700},{"name":"Belize","fips":"BH","iso2":"BZ","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4530},{"name":"Benin","fips":"BN","iso2":"BJ","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4570},{"name":"Bermuda","fips":"BD","iso2":"BM","type":"territory","first":1990,"last":2025,"years":36,"fields":4099},{"name":"Bhutan","fips":"BT","iso2":"BT","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4328},{"name":"Bolivia","fips":"BL","iso2":"BO","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4740},{"name":"Bosnia and Herzegovina","fips":"BK","iso2":"BA","type":"sovereign","first":1992,"last":2025,"years":34,"fields":4493},{"name":"Botswana","fips":"BC","iso2":"BW","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4454},{"name":"Bouvet Island","fips":"BV","iso2":"BV","type":"territory","first":1990,"last":2025,"years":36,"fields":1031},{"name":"Brazil","fips":"BR","iso2":"BR","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4763},{"name":"British Indian Ocean Territory","fips":"IO","iso2":"IO","type":"territory","first":1990,"last":2025,"years":36,"fields":1451},{"name":"British Virgin Islands","fips":"VI","iso2":"VG","type":"territory","first":1990,"last":2025,"years":36,"fields":3909},{"name":"Brunei","fips":"BX","iso2":"BN","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4458},{"name":"Bulgaria","fips":"BU","iso2":"BG","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4720},{"name":"Burkina Faso","fips":"UV","iso2":"BF","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4480},{"name":"Burma (Myanmar)","fips":"BM","iso2":"MM","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4687},{"name":"Burundi","fips":"BY","iso2":"BI","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4526},{"name":"Cabo Verde","fips":"CV","iso2":"CV","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4371},{"name":"Cambodia","fips":"CB","iso2":"KH","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4629},{"name":"Cameroon","fips":"CM","iso2":"CM","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4664},{"name":"Canada","fips":"CA","iso2":"CA","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4724},{"name":"Cayman Islands","fips":"CJ","iso2":"KY","type":"territory","first":1990,"last":2025,"years":36,"fields":4055},{"name":"Central African Republic","fips":"CT","iso2":"CF","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4422},{"name":"Chad","fips":"CD","iso2":"TD","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4548},{"name":"Chile","fips":"CI","iso2":"CL","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4681},{"name":"China","fips":"CH","iso2":"CN","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4778},{"name":"Christmas Island","fips":"KT","iso2":"CX","type":"territory","first":1990,"last":2025,"years":36,"fields":2909},{"name":"Clipperton Island","fips":"IP","iso2":"PF","type":"territory","first":1990,"last":2025,"years":36,"fields":963},{"name":"Cocos (Keeling) Islands","fips":"CK","iso2":"CC","type":"territory","first":1990,"last":2025,"years":36,"fields":2880},{"name":"Colombia","fips":"CO","iso2":"CO","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4797},{"name":"Comoros","fips":"CN","iso2":"KM","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4297},{"name":"Congo, Democratic Republic of the","fips":"CG","iso2":"CD","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4642},{"name":"Congo, Republic of the","fips":"CF","iso2":"CG","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4595},{"name":"Cook Islands","fips":"CW","iso2":"CK","type":"territory","first":1990,"last":2025,"years":36,"fields":3930},{"name":"Coral Sea Islands","fips":"CR","iso2":"AU","type":"territory","first":1990,"last":2025,"years":36,"fields":1078},{"name":"Costa Rica","fips":"CS","iso2":"CR","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4643},{"name":"Cote d'Ivoire","fips":"IV","iso2":"CI","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4674},{"name":"Croatia","fips":"HR","iso2":"HR","type":"sovereign","first":1992,"last":2025,"years":34,"fields":4565},{"name":"Cuba","fips":"CU","iso2":"CU","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4633},{"name":"Curacao","fips":"UC","iso2":"CW","type":"territory","first":2010,"last":2025,"years":16,"fields":1812},{"name":"Cyprus","fips":"CY","iso2":"CY","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4651},{"name":"Czechia","fips":"EZ","iso2":"CZ","type":"sovereign","first":1993,"last":2025,"years":33,"fields":4477},{"name":"Denmark","fips":"DA","iso2":"DK","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4619},{"name":"Dhekelia","fips":"DX","iso2":"","type":"territory","first":2004,"last":2025,"years":22,"fields":677},{"name":"Djibouti","fips":"DJ","iso2":"DJ","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4439},{"name":"Dominica","fips":"DO","iso2":"DM","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4197},{"name":"Dominican Republic","fips":"DR","iso2":"DO","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4622},{"name":"Ecuador","fips":"EC","iso2":"EC","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4752},{"name":"Egypt","fips":"EG","iso2":"EG","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4812},{"name":"El Salvador","fips":"ES","iso2":"SV","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4631},{"name":"Equatorial Guinea","fips":"EK","iso2":"GQ","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4396},{"name":"Eritrea","fips":"ER","iso2":"ER","type":"sovereign","first":1993,"last":2025,"years":33,"fields":4188},{"name":"Estonia","fips":"EN","iso2":"EE","type":"sovereign","first":1992,"last":2025,"years":34,"fields":4508},{"name":"Eswatini","fips":"WZ","iso2":"SZ","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4404},{"name":"Ethiopia","fips":"ET","iso2":"ET","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4657},{"name":"Europa Island","fips":"EU","iso2":"RE","type":"territory","first":1990,"last":2005,"years":16,"fields":450},{"name":"European Union","fips":"EE","iso2":"","type":"misc","first":2004,"last":2025,"years":22,"fields":2641},{"name":"Falkland Islands (Islas Malvinas)","fips":"FK","iso2":"FK","type":"territory","first":1990,"last":2025,"years":36,"fields":3763},{"name":"Faroe Islands","fips":"FO","iso2":"FO","type":"territory","first":1990,"last":2025,"years":36,"fields":3960},{"name":"Fiji","fips":"FJ","iso2":"FJ","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4475},{"name":"Finland","fips":"FI","iso2":"FI","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4608},{"name":"France","fips":"FR","iso2":"FR","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4785},{"name":"French Guiana","fips":"FG","iso2":"GF","type":"territory","first":1990,"last":2006,"years":17,"fields":1609},{"name":"French Polynesia","fips":"FP","iso2":"PF","type":"territory","first":1990,"last":2025,"years":36,"fields":4035},{"name":"French Southern and Antarctic Lands","fips":"FS","iso2":"TF","type":"territory","first":1990,"last":2025,"years":36,"fields":1277},{"name":"Gabon","fips":"GB","iso2":"GA","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4589},{"name":"Gambia, The","fips":"GA","iso2":"GM","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4475},{"name":"Gaza Strip","fips":"GZ","iso2":"PS","type":"disputed","first":1990,"last":2025,"years":36,"fields":3112},{"name":"Georgia","fips":"GG","iso2":"GE","type":"sovereign","first":1992,"last":2025,"years":34,"fields":4569},{"name":"Germany","fips":"GM","iso2":"DE","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4800},{"name":"Ghana","fips":"GH","iso2":"GH","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4719},{"name":"Gibraltar","fips":"GI","iso2":"GI","type":"territory","first":1990,"last":2025,"years":36,"fields":3862},{"name":"Glorioso Islands","fips":"GO","iso2":"RE","type":"territory","first":1990,"last":2005,"years":16,"fields":434},{"name":"Greece","fips":"GR","iso2":"GR","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4678},{"name":"Greenland","fips":"GL","iso2":"GL","type":"territory","first":1990,"last":2025,"years":36,"fields":3957},{"name":"Grenada","fips":"GJ","iso2":"GD","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4214},{"name":"Guadeloupe","fips":"GP","iso2":"GP","type":"territory","first":1990,"last":2006,"years":17,"fields":1551},{"name":"Guam","fips":"GQ","iso2":"GU","type":"territory","first":1990,"last":2025,"years":36,"fields":3876},{"name":"Guatemala","fips":"GT","iso2":"GT","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4677},{"name":"Guernsey","fips":"GK","iso2":"GB","type":"crown_dependency","first":1990,"last":2025,"years":36,"fields":3354},{"name":"Guinea","fips":"GV","iso2":"GN","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4520},{"name":"Guinea-Bissau","fips":"PU","iso2":"GW","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4406},{"name":"Guyana","fips":"GY","iso2":"GY","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4517},{"name":"Haiti","fips":"HA","iso2":"HT","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4472},{"name":"Heard Island and McDonald Islands","fips":"HM","iso2":"HM","type":"territory","first":1990,"last":2025,"years":36,"fields":1048},{"name":"Holy See (Vatican City)","fips":"VT","iso2":"VA","type":"sovereign","first":1990,"last":2025,"years":36,"fields":2478},{"name":"Honduras","fips":"HO","iso2":"HN","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4613},{"name":"Hong Kong","fips":"HK","iso2":"HK","type":"special_admin","first":1990,"last":2025,"years":36,"fields":4369},{"name":"Howland Island","fips":"HQ","iso2":"UM","type":"territory","first":1990,"last":2020,"years":24,"fields":626},{"name":"Hungary","fips":"HU","iso2":"HU","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4673},{"name":"Iceland","fips":"IC","iso2":"IS","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4418},{"name":"Iles Eparses","fips":"ZZ","iso2":"","type":"territory","first":2006,"last":2006,"years":1,"fields":29},{"name":"India","fips":"IN","iso2":"IN","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4799},{"name":"Indian Ocean","fips":"XO","iso2":"","type":"misc","first":1990,"last":2025,"years":36,"fields":635},{"name":"Indonesia","fips":"ID","iso2":"ID","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4787},{"name":"Iran","fips":"IR","iso2":"IR","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4746},{"name":"Iraq","fips":"IZ","iso2":"IQ","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4660},{"name":"Ireland","fips":"EI","iso2":"IE","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4655},{"name":"Isle of Man","fips":"IM","iso2":"GB","type":"crown_dependency","first":1990,"last":2025,"years":36,"fields":3397},{"name":"Israel","fips":"IS","iso2":"IL","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4674},{"name":"Italy","fips":"IT","iso2":"IT","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4718},{"name":"Jamaica","fips":"JM","iso2":"JM","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4541},{"name":"Jan Mayen","fips":"JN","iso2":"SJ","type":"territory","first":1990,"last":2025,"years":36,"fields":1105},{"name":"Japan","fips":"JA","iso2":"JP","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4673},{"name":"Jarvis Island","fips":"DQ","iso2":"UM","type":"territory","first":1990,"last":2020,"years":24,"fields":612},{"name":"Jersey","fips":"JE","iso2":"GB","type":"crown_dependency","first":1990,"last":2025,"years":36,"fields":3408},{"name":"Johnston Atoll","fips":"JQ","iso2":"UM","type":"territory","first":1990,"last":2020,"years":24,"fields":720},{"name":"Jordan","fips":"JO","iso2":"JO","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4659},{"name":"Juan de Nova Island","fips":"JU","iso2":"RE","type":"territory","first":1990,"last":2005,"years":16,"fields":462},{"name":"Kazakhstan","fips":"KZ","iso2":"KZ","type":"sovereign","first":1992,"last":2025,"years":34,"fields":4583},{"name":"Kenya","fips":"KE","iso2":"KE","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4692},{"name":"Kingman Reef","fips":"KQ","iso2":"UM","type":"territory","first":1990,"last":2020,"years":24,"fields":601},{"name":"Kiribati","fips":"KR","iso2":"KI","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4196},{"name":"Korea, North","fips":"KN","iso2":"KP","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4330},{"name":"Korea, South","fips":"KS","iso2":"KR","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4653},{"name":"Kosovo","fips":"KV","iso2":"","type":"disputed","first":2008,"last":2025,"years":18,"fields":2041},{"name":"Kuwait","fips":"KU","iso2":"KW","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4572},{"name":"Kyrgyzstan","fips":"KG","iso2":"KG","type":"sovereign","first":1992,"last":2025,"years":34,"fields":4494},{"name":"Laos","fips":"LA","iso2":"LA","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4571},{"name":"Latvia","fips":"LG","iso2":"LV","type":"sovereign","first":1992,"last":2025,"years":34,"fields":4520},{"name":"Lebanon","fips":"LE","iso2":"LB","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4596},{"name":"Lesotho","fips":"LT","iso2":"LS","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4408},{"name":"Liberia","fips":"LI","iso2":"LR","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4473},{"name":"Libya","fips":"LY","iso2":"LY","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4559},{"name":"Liechtenstein","fips":"LS","iso2":"LI","type":"sovereign","first":1990,"last":2025,"years":36,"fields":3552},{"name":"Lithuania","fips":"LH","iso2":"LT","type":"sovereign","first":1992,"last":2025,"years":34,"fields":4513},{"name":"Luxembourg","fips":"LU","iso2":"LU","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4599},{"name":"Macau","fips":"MC","iso2":"MO","type":"special_admin","first":1990,"last":2025,"years":36,"fields":4133},{"name":"Madagascar","fips":"MA","iso2":"MG","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4574},{"name":"Malawi","fips":"MI","iso2":"MW","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4560},{"name":"Malaysia","fips":"MY","iso2":"MY","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4791},{"name":"Maldives","fips":"MV","iso2":"MV","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4399},{"name":"Mali","fips":"ML","iso2":"ML","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4567},{"name":"Malta","fips":"MT","iso2":"MT","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4466},{"name":"Marshall Islands","fips":"RM","iso2":"MH","type":"freely_associated","first":1990,"last":2025,"years":36,"fields":3875},{"name":"Martinique","fips":"MB","iso2":"MQ","type":"territory","first":1990,"last":2006,"years":17,"fields":1555},{"name":"Mauritania","fips":"MR","iso2":"MR","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4520},{"name":"Mauritius","fips":"MP","iso2":"MU","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4456},{"name":"Mayotte","fips":"MF","iso2":"YT","type":"territory","first":1990,"last":2012,"years":23,"fields":2044},{"name":"Mexico","fips":"MX","iso2":"MX","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4778},{"name":"Micronesia, Federated States of","fips":"FM","iso2":"FM","type":"freely_associated","first":1990,"last":2025,"years":36,"fields":3922},{"name":"Midway Islands","fips":"MQ","iso2":"UM","type":"territory","first":1990,"last":2020,"years":24,"fields":739},{"name":"Moldova","fips":"MD","iso2":"MD","type":"sovereign","first":1992,"last":2025,"years":34,"fields":4483},{"name":"Monaco","fips":"MN","iso2":"MC","type":"sovereign","first":1990,"last":2025,"years":36,"fields":3472},{"name":"Mongolia","fips":"MG","iso2":"MN","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4533},{"name":"Montenegro","fips":"MJ","iso2":"ME","type":"sovereign","first":2006,"last":2025,"years":20,"fields":2798},{"name":"Montserrat","fips":"MH","iso2":"MS","type":"territory","first":1990,"last":2025,"years":36,"fields":3877},{"name":"Morocco","fips":"MO","iso2":"MA","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4692},{"name":"Mozambique","fips":"MZ","iso2":"MZ","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4643},{"name":"Namibia","fips":"WA","iso2":"NA","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4548},{"name":"Nauru","fips":"NR","iso2":"NR","type":"sovereign","first":1990,"last":2025,"years":36,"fields":3974},{"name":"Navassa Island","fips":"BQ","iso2":"UM","type":"territory","first":1990,"last":2025,"years":36,"fields":975},{"name":"Nepal","fips":"NP","iso2":"NP","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4525},{"name":"Netherlands","fips":"NL","iso2":"NL","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4744},{"name":"Netherlands Antilles","fips":"NT","iso2":"AN","type":"dissolved","first":1990,"last":2010,"years":21,"fields":2097},{"name":"New Caledonia","fips":"NC","iso2":"NC","type":"territory","first":1990,"last":2025,"years":36,"fields":4056},{"name":"New Zealand","fips":"NZ","iso2":"NZ","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4629},{"name":"Nicaragua","fips":"NU","iso2":"NI","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4581},{"name":"Niger","fips":"NG","iso2":"NE","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4509},{"name":"Nigeria","fips":"NI","iso2":"NG","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4775},{"name":"Niue","fips":"NE","iso2":"NU","type":"territory","first":1990,"last":2025,"years":36,"fields":3702},{"name":"Norfolk Island","fips":"NF","iso2":"NF","type":"territory","first":1990,"last":2025,"years":36,"fields":2970},{"name":"North Macedonia","fips":"MK","iso2":"MK","type":"sovereign","first":1992,"last":2025,"years":33,"fields":4298},{"name":"Northern Mariana Islands","fips":"CQ","iso2":"MP","type":"territory","first":1990,"last":2025,"years":36,"fields":3483},{"name":"Norway","fips":"NO","iso2":"NO","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4686},{"name":"Oman","fips":"MU","iso2":"OM","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4566},{"name":"Pacific Ocean","fips":"ZN","iso2":"","type":"misc","first":1990,"last":2025,"years":36,"fields":648},{"name":"Pakistan","fips":"PK","iso2":"PK","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4768},{"name":"Palau","fips":"PS","iso2":"PW","type":"freely_associated","first":1993,"last":2025,"years":33,"fields":3510},{"name":"Palmyra Atoll","fips":"LQ","iso2":"UM","type":"territory","first":1990,"last":2020,"years":24,"fields":629},{"name":"Panama","fips":"PM","iso2":"PA","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4625},{"name":"Papua New Guinea","fips":"PP","iso2":"PG","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4618},{"name":"Paracel Islands","fips":"PF","iso2":"","type":"disputed","first":1990,"last":2025,"years":36,"fields":963},{"name":"Paraguay","fips":"PA","iso2":"PY","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4661},{"name":"Peru","fips":"PE","iso2":"PE","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4802},{"name":"Philippines","fips":"RP","iso2":"PH","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4765},{"name":"Pitcairn Islands","fips":"PC","iso2":"PN","type":"territory","first":1990,"last":2025,"years":36,"fields":2886},{"name":"Poland","fips":"PL","iso2":"PL","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4746},{"name":"Portugal","fips":"PO","iso2":"PT","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4668},{"name":"Puerto Rico","fips":"RQ","iso2":"PR","type":"territory","first":1990,"last":2025,"years":36,"fields":4047},{"name":"Qatar","fips":"QA","iso2":"QA","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4529},{"name":"Reunion","fips":"RE","iso2":"RE","type":"territory","first":1990,"last":2006,"years":17,"fields":1563},{"name":"Romania","fips":"RO","iso2":"RO","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4718},{"name":"Russia","fips":"RS","iso2":"RU","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4817},{"name":"Rwanda","fips":"RW","iso2":"RW","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4550},{"name":"Saint Barthelemy","fips":"TB","iso2":"BL","type":"territory","first":2007,"last":2025,"years":19,"fields":1059},{"name":"Saint Helena, Ascension, and Tristan da Cunha","fips":"SH","iso2":"SH","type":"territory","first":1990,"last":2025,"years":36,"fields":3752},{"name":"Saint Kitts and Nevis","fips":"SC","iso2":"KN","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4220},{"name":"Saint Lucia","fips":"ST","iso2":"LC","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4230},{"name":"Saint Martin","fips":"RN","iso2":"MF","type":"territory","first":2007,"last":2025,"years":19,"fields":1223},{"name":"Saint Pierre and Miquelon","fips":"SB","iso2":"PM","type":"territory","first":1990,"last":2025,"years":36,"fields":3684},{"name":"Saint Vincent and the Grenadines","fips":"VC","iso2":"VC","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4243},{"name":"Samoa","fips":"WS","iso2":"WS","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4251},{"name":"San Marino","fips":"SM","iso2":"SM","type":"sovereign","first":1990,"last":2025,"years":36,"fields":3597},{"name":"Sao Tome and Principe","fips":"TP","iso2":"ST","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4357},{"name":"Saudi Arabia","fips":"SA","iso2":"SA","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4672},{"name":"Senegal","fips":"SG","iso2":"SN","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4680},{"name":"Serbia","fips":"RI","iso2":"RS","type":"sovereign","first":2006,"last":2025,"years":20,"fields":3097},{"name":"Serbia and Montenegro","fips":"YI","iso2":"CS","type":"dissolved","first":1990,"last":2005,"years":16,"fields":1628},{"name":"Seychelles","fips":"SE","iso2":"SC","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4383},{"name":"Sierra Leone","fips":"SL","iso2":"SL","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4477},{"name":"Singapore","fips":"SN","iso2":"SG","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4519},{"name":"Sint Maarten","fips":"NN","iso2":"SX","type":"territory","first":2010,"last":2025,"years":16,"fields":1384},{"name":"Slovakia","fips":"LO","iso2":"SK","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4684},{"name":"Slovenia","fips":"SI","iso2":"SI","type":"sovereign","first":1992,"last":2025,"years":34,"fields":4491},{"name":"Solomon Islands","fips":"BP","iso2":"SB","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4257},{"name":"Somalia","fips":"SO","iso2":"SO","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4333},{"name":"South Africa","fips":"SF","iso2":"ZA","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4732},{"name":"South Georgia and the South Sandwich Islands","fips":"SX","iso2":"GS","type":"territory","first":1990,"last":2025,"years":34,"fields":1167},{"name":"South Sudan","fips":"OD","iso2":"SS","type":"sovereign","first":2011,"last":2025,"years":15,"fields":1848},{"name":"Southern Ocean","fips":"OO","iso2":"","type":"misc","first":2000,"last":2025,"years":26,"fields":518},{"name":"Spain","fips":"SP","iso2":"ES","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4730},{"name":"Spratly Islands","fips":"PG","iso2":"","type":"disputed","first":1990,"last":2025,"years":36,"fields":986},{"name":"Sri Lanka","fips":"CE","iso2":"LK","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4648},{"name":"Sudan","fips":"SU","iso2":"SD","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4624},{"name":"Suriname","fips":"NS","iso2":"SR","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4484},{"name":"Svalbard","fips":"SV","iso2":"SJ","type":"territory","first":1990,"last":2025,"years":36,"fields":2342},{"name":"Sweden","fips":"SW","iso2":"SE","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4653},{"name":"Switzerland","fips":"SZ","iso2":"CH","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4688},{"name":"Syria","fips":"SY","iso2":"SY","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4658},{"name":"Taiwan","fips":"TW","iso2":"TW","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4332},{"name":"Tajikistan","fips":"TI","iso2":"TJ","type":"sovereign","first":1992,"last":2025,"years":34,"fields":4463},{"name":"Tanzania","fips":"TZ","iso2":"TZ","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4732},{"name":"Thailand","fips":"TH","iso2":"TH","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4786},{"name":"Timor-Leste","fips":"TT","iso2":"TL","type":"sovereign","first":2002,"last":2025,"years":24,"fields":3302},{"name":"Togo","fips":"TO","iso2":"TG","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4564},{"name":"Tokelau","fips":"TL","iso2":"TK","type":"territory","first":1990,"last":2025,"years":36,"fields":3094},{"name":"Tonga","fips":"TN","iso2":"TO","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4292},{"name":"Trinidad and Tobago","fips":"TD","iso2":"TT","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4511},{"name":"Tromelin Island","fips":"TE","iso2":"UM","type":"territory","first":1990,"last":2005,"years":16,"fields":444},{"name":"Tunisia","fips":"TS","iso2":"TN","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4611},{"name":"Turkiye","fips":"TU","iso2":"TR","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4780},{"name":"Turkmenistan","fips":"TX","iso2":"TM","type":"sovereign","first":1992,"last":2025,"years":34,"fields":4474},{"name":"Turks and Caicos Islands","fips":"TK","iso2":"TC","type":"territory","first":1990,"last":2025,"years":36,"fields":3853},{"name":"Tuvalu","fips":"TV","iso2":"TV","type":"sovereign","first":1990,"last":2025,"years":36,"fields":3765},{"name":"Uganda","fips":"UG","iso2":"UG","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4604},{"name":"Ukraine","fips":"UP","iso2":"UA","type":"sovereign","first":1992,"last":2025,"years":34,"fields":4596},{"name":"United Arab Emirates","fips":"AE","iso2":"AE","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4577},{"name":"United Kingdom","fips":"UK","iso2":"GB","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4763},{"name":"United States","fips":"US","iso2":"US","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4732},{"name":"United States Pacific Island Wildlife Refuges","fips":"UM","iso2":"","type":"territory","first":2006,"last":2025,"years":20,"fields":616},{"name":"Uruguay","fips":"UY","iso2":"UY","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4619},{"name":"Uzbekistan","fips":"UZ","iso2":"UZ","type":"sovereign","first":1992,"last":2025,"years":34,"fields":4490},{"name":"Vanuatu","fips":"NH","iso2":"VU","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4253},{"name":"Venezuela","fips":"VE","iso2":"VE","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4752},{"name":"Vietnam","fips":"VM","iso2":"VN","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4720},{"name":"Virgin Islands","fips":"VQ","iso2":"VI","type":"territory","first":1990,"last":2025,"years":36,"fields":3767},{"name":"Wake Island","fips":"WQ","iso2":"UM","type":"territory","first":1990,"last":2025,"years":36,"fields":1263},{"name":"Wallis and Futuna","fips":"WF","iso2":"WF","type":"territory","first":1990,"last":2025,"years":36,"fields":3379},{"name":"West Bank","fips":"WE","iso2":"PS","type":"disputed","first":1990,"last":2025,"years":36,"fields":3343},{"name":"Western Sahara","fips":"WI","iso2":"EH","type":"disputed","first":1990,"last":2020,"years":31,"fields":2790},{"name":"World","fips":"XX","iso2":"","type":"misc","first":1990,"last":2025,"years":36,"fields":3077},{"name":"Yemen","fips":"YM","iso2":"YE","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4678},{"name":"Zambia","fips":"ZA","iso2":"ZM","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4646},{"name":"Zimbabwe","fips":"ZI","iso2":"ZW","type":"sovereign","first":1990,"last":2025,"years":36,"fields":4761}]};

function showTab(tab) {
  document.querySelectorAll('.tab-content').forEach(function(el) { el.classList.remove('active'); });
  document.querySelectorAll('.sidebar a[id^="nav-"]').forEach(function(el) { el.classList.remove('active'); });
  document.getElementById('tab-' + tab).classList.add('active');
  var navEl = document.getElementById('nav-' + tab);
  if (navEl) navEl.classList.add('active');
}

function getBadgeClass(type) {
  if (type === 'sovereign') return 'badge-sovereign';
  if (type === 'territory') return 'badge-territory';
  if (type === 'disputed') return 'badge-disputed';
  if (type === 'misc') return 'badge-misc';
  return 'badge-other';
}

function renderCountries(filter, type) {
  var rows = DATA.entities;
  if (filter) {
    var lc = filter.toLowerCase();
    rows = rows.filter(function(e) { return e.name.toLowerCase().indexOf(lc) !== -1; });
  }
  if (type && type !== 'all') {
    rows = rows.filter(function(e) { return e.type === type; });
  }

  var tbody = document.getElementById('countries-tbody');
  tbody.innerHTML = rows.map(function(e) {
    var badgeClass = getBadgeClass(e.type);
    var typeLabel = e.type.replace(/_/g, ' ');
    return '<tr>' +
      '<td>' + e.name + '</td>' +
      '<td class="mono">' + e.fips + '</td>' +
      '<td class="mono">' + e.iso2 + '</td>' +
      '<td><span class="badge ' + badgeClass + '">' + typeLabel + '</span></td>' +
      '<td class="mono">' + e.first + '&ndash;' + e.last + ' (' + e.years + 'y)</td>' +
      '<td class="r">' + e.fields.toLocaleString() + '</td>' +
      '</tr>';
  }).join('');

  document.getElementById('countries-count').textContent = rows.length + ' entities';
}

/* ── Gallery: 3D tilt, parallax, drag-scroll, auto-advance, lightbox ── */
function initGallery() {
  var track = document.getElementById('gallery-track');
  var cards = track.querySelectorAll('.gallery-card');
  var section = document.getElementById('gallery-section');
  var progressContainer = document.getElementById('gallery-progress');
  var lightbox = document.getElementById('gallery-lightbox');
  var lbImg = lightbox.querySelector('img');
  var lbCaption = lightbox.querySelector('.lb-caption');

  /* ── Scroll-triggered reveal ── */
  var observer = new IntersectionObserver(function(entries) {
    entries.forEach(function(e) {
      if (e.isIntersecting) { e.target.classList.add('visible'); observer.unobserve(e.target); }
    });
  }, { threshold: 0.15 });
  observer.observe(section);

  /* ── 3D tilt + parallax + glow per card ── */
  cards.forEach(function(card) {
    var img = card.querySelector('.gallery-img-wrap img');

    card.addEventListener('mousemove', function(e) {
      var rect = card.getBoundingClientRect();
      var x = e.clientX - rect.left;
      var y = e.clientY - rect.top;
      var cx = rect.width / 2;
      var cy = rect.height / 2;

      /* Normalize -1 to 1 */
      var nx = (x - cx) / cx;
      var ny = (y - cy) / cy;

      /* 3D tilt — max 8deg */
      var rotateY = nx * 8;
      var rotateX = -ny * 6;
      card.style.transform = 'perspective(800px) rotateX(' + rotateX + 'deg) rotateY(' + rotateY + 'deg) scale(1.03)';

      /* Parallax on image */
      card.style.setProperty('--px', nx.toFixed(3));
      card.style.setProperty('--py', ny.toFixed(3));

      /* Cursor glow position */
      card.style.setProperty('--mouse-x', x + 'px');
      card.style.setProperty('--mouse-y', y + 'px');
    });

    card.addEventListener('mouseleave', function() {
      card.style.transform = '';
      card.style.setProperty('--px', '0');
      card.style.setProperty('--py', '0');
    });

    /* Click to open lightbox (skip if arrow or drag) */
    card.addEventListener('click', function(e) {
      if (wasDragging) return;
      if (e.target.closest('.card-arrow')) return;
      var src = img.src;
      var caption = card.querySelector('.gallery-caption');
      lbImg.src = src;
      lbImg.alt = img.alt;
      lbCaption.querySelector('strong').textContent = caption.querySelector('strong').textContent;
      lbCaption.querySelector('span').textContent = caption.querySelector('span').textContent;
      lightbox.classList.add('open');
    });
  });

  /* Close lightbox */
  lightbox.addEventListener('click', function() { lightbox.classList.remove('open'); });
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') lightbox.classList.remove('open');
  });

  /* ── Per-card arrow buttons ── */
  cards.forEach(function(card) {
    var idx = parseInt(card.dataset.idx, 10);
    var leftArr = card.querySelector('.card-arrow.left');
    var rightArr = card.querySelector('.card-arrow.right');
    if (leftArr) {
      leftArr.addEventListener('click', function(e) {
        e.stopPropagation();
        if (idx > 0) scrollToCard(idx - 1);
      });
    }
    if (rightArr) {
      rightArr.addEventListener('click', function(e) {
        e.stopPropagation();
        if (idx < cards.length - 1) scrollToCard(idx + 1);
      });
    }
  });

  /* ── Drag-to-scroll with momentum ── */
  var isDragging = false;
  var wasDragging = false;
  var startX = 0, scrollLeft = 0;
  var velocity = 0, lastX = 0, lastTime = 0;
  var momentumId = null;

  track.addEventListener('mousedown', function(e) {
    isDragging = true;
    wasDragging = false;
    track.classList.add('dragging');
    startX = e.pageX - track.offsetLeft;
    scrollLeft = track.scrollLeft;
    velocity = 0;
    lastX = e.pageX;
    lastTime = Date.now();
    if (momentumId) cancelAnimationFrame(momentumId);
    pauseAuto();
  });

  document.addEventListener('mousemove', function(e) {
    if (!isDragging) return;
    e.preventDefault();
    var x = e.pageX - track.offsetLeft;
    var walk = (x - startX) * 1.2;
    track.scrollLeft = scrollLeft - walk;

    /* Track velocity for momentum */
    var now = Date.now();
    var dt = now - lastTime;
    if (dt > 0) {
      velocity = (e.pageX - lastX) / dt;
      lastX = e.pageX;
      lastTime = now;
    }

    if (Math.abs(walk) > 4) wasDragging = true;
  });

  document.addEventListener('mouseup', function() {
    if (!isDragging) return;
    isDragging = false;
    track.classList.remove('dragging');

    /* Apply momentum */
    if (Math.abs(velocity) > 0.15) {
      var v = velocity * 300;
      (function coast() {
        if (Math.abs(v) < 0.5) return;
        track.scrollLeft -= v * 0.016;
        v *= 0.95;
        momentumId = requestAnimationFrame(coast);
      })();
    }

    setTimeout(function() { wasDragging = false; }, 50);
    scheduleAuto();
  });

  /* Touch drag for mobile */
  var touchStartX = 0, touchScrollLeft = 0;
  track.addEventListener('touchstart', function(e) {
    touchStartX = e.touches[0].pageX;
    touchScrollLeft = track.scrollLeft;
    pauseAuto();
  }, { passive: true });
  track.addEventListener('touchend', function() { scheduleAuto(); }, { passive: true });

  /* ── Auto-advance with progress pips ── */
  var currentPip = 0;
  var autoTimer = null;
  var AUTO_INTERVAL = 6000;

  /* Build pips */
  cards.forEach(function(_, i) {
    var pip = document.createElement('div');
    pip.className = 'gallery-pip' + (i === 0 ? ' active' : '');
    pip.innerHTML = '<div class="gallery-pip-fill"></div>';
    pip.onclick = function() { scrollToCard(i); };
    progressContainer.appendChild(pip);
  });

  var pips = progressContainer.querySelectorAll('.gallery-pip');

  function updatePips(idx) {
    pips.forEach(function(p, i) {
      p.classList.remove('active', 'past');
      if (i < idx) p.classList.add('past');
      if (i === idx) p.classList.add('active');
    });
    currentPip = idx;
  }

  function scrollToCard(idx) {
    var card = cards[idx];
    if (!card) return;
    var trackRect = track.getBoundingClientRect();
    var cardRect = card.getBoundingClientRect();
    var offset = cardRect.left - trackRect.left + track.scrollLeft - (trackRect.width / 2 - cardRect.width / 2);
    track.scrollTo({ left: offset, behavior: 'smooth' });
    updatePips(idx);
    restartAuto();
  }

  function advanceAuto() {
    var next = (currentPip + 1) % cards.length;
    scrollToCard(next);
  }

  function scheduleAuto() {
    clearInterval(autoTimer);
    autoTimer = setInterval(advanceAuto, AUTO_INTERVAL);
  }

  function pauseAuto() {
    clearInterval(autoTimer);
  }

  function restartAuto() {
    pauseAuto();
    scheduleAuto();
  }

  /* Pause auto on hover */
  track.addEventListener('mouseenter', pauseAuto);
  track.addEventListener('mouseleave', scheduleAuto);

  /* Update pips on manual scroll */
  var scrollDebounce;
  track.addEventListener('scroll', function() {
    clearTimeout(scrollDebounce);
    scrollDebounce = setTimeout(function() {
      var trackLeft = track.scrollLeft;
      var cardW = cards[0].offsetWidth + 20;
      var idx = Math.round(trackLeft / cardW);
      idx = Math.max(0, Math.min(idx, cards.length - 1));
      if (idx !== currentPip) updatePips(idx);
    }, 80);
  });

  /* Start auto-advance */
  updatePips(0);
  scheduleAuto();
}

var activeType = 'all';

function filterType(type) {
  activeType = type;
  document.querySelectorAll('.filter-pill').forEach(function(p) {
    if (p.dataset.type === type) {
      p.classList.add('active');
    } else {
      p.classList.remove('active');
    }
  });
  renderCountries(document.getElementById('country-filter').value, type);
}

document.addEventListener('DOMContentLoaded', function() {
  renderCountries('', 'all');
  initGallery();
  document.getElementById('country-filter').addEventListener('input', function(e) {
    renderCountries(e.target.value, activeType);
  });
});
</script>

</body>
</html>
